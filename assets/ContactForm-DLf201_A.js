import{u as F,r as l,d as u,e as L,o as d,c as v,b as t,w as g,v as C,f,g as I,a as R,h as U,i as $,j as H}from"./index-BdF8PO5t.js";const j={class:"wrapper_card"},Y={class:"form"},z={class:"contact_input"},A=t("label",{class:"contact_label"},"First name",-1),G={key:0,class:"error"},J={class:"contact_input"},K=t("label",{class:"contact_label"},"Last name",-1),O={key:0,class:"error"},Q={class:"contact_input"},W=t("label",{class:"contact_label"},"Phone number",-1),X={key:0,class:"error"},Z={key:1,class:"error"},ee={class:"form_buttons"},te=t("button",{class:"form_btn cancel_btn"},"Cancel",-1),oe={__name:"ContactForm",props:{contactId:{type:Number,required:!1}},setup(T){const m=T;console.log(m.contactId);const w=$(),p=F(),n=l(""),r=l(""),o=l(""),_=l(!1),h=l(!1),b=l(!1),c=l(!1),i=u(()=>p.getContactById(m.contactId)),M=u(()=>p.getContactByPhone(o.value)),y=u(()=>!!(!n.value&&_.value)),S=u(()=>!!(!r.value&&h.value)),k=u(()=>!!(!o.value&&b.value)),x=u(()=>y.value||S.value||k.value||c.value),V=()=>{const a=new Date,e=(a.getMonth()+1).toString().padStart(2,"0")+"-"+a.getDate().toString().padStart(2,"0")+"-"+a.getFullYear(),N=a.getHours()+":"+a.getMinutes().toString().padStart(2,"0")+":"+a.getSeconds().toString().padStart(2,"0");return e+" "+N},E=()=>{p.editContact({...i.value,firstName:n.value,lastName:r.value,phoneNumber:o.value})},B=()=>{n.value="",r.value="",o.value="",c.value=!1},P=async()=>{const a=Math.floor(Math.random()*1e7);await p.createContact({id:a,firstName:n.value,lastName:r.value,phoneNumber:o.value,created:V()})},q=()=>{_.value=!0,h.value=!0,b.value=!0;const a=M.value;if(a&&+a.id!==m.contactId){c.value=!0;return}x.value||(m.contactId?E():P(),B(),w.push({name:"list"}))},D=()=>{c.value=!1};return L(()=>{i.value&&(n.value=i.value.firstName,r.value=i.value.lastName,o.value=i.value.phoneNumber)}),(a,e)=>{const N=H("RouterLink");return d(),v("div",j,[t("form",Y,[t("div",z,[A,g(t("input",{class:"input",type:"text",placeholder:"enter...","onUpdate:modelValue":e[0]||(e[0]=s=>n.value=s),onBlur:e[1]||(e[1]=s=>_.value=!0)},null,544),[[C,n.value]]),y.value?(d(),v("p",G,"This field is required")):f("",!0)]),t("div",J,[K,g(t("input",{class:"input",type:"text",placeholder:"enter...","onUpdate:modelValue":e[2]||(e[2]=s=>r.value=s),onBlur:e[3]||(e[3]=s=>h.value=!0)},null,544),[[C,r.value]]),S.value?(d(),v("p",O,"This field is required")):f("",!0)]),t("div",Q,[W,g(t("input",{class:"input",type:"tel",placeholder:"+380...","onUpdate:modelValue":e[4]||(e[4]=s=>o.value=s),onBlur:e[5]||(e[5]=s=>b.value=!0),onInput:D},null,544),[[C,o.value]]),c.value?(d(),v("p",X," phone number is already available ")):f("",!0),k.value?(d(),v("p",Z,"This field is required")):f("",!0)])]),t("div",ee,[t("button",{class:"form_btn confirm_btn",onClick:I(q,["prevent"])}," Confirm "),t("button",{class:"form_btn clear_btn",onClick:I(B,["prevent"])}," Clear "),R(N,{to:{name:"list"}},{default:U(()=>[te]),_:1})])])}}};export{oe as _};
